<table mat-table [dataSource]="(anime$ | async) ?? []" class="anime-table">
	@for (column of displayedColumns; track $index) {
		<ng-container [matColumnDef]="column.key">
			<th mat-header-cell *matHeaderCellDef>{{column.header}}</th>
			<td mat-cell *matCellDef="let element">
				@switch (column.key) {
					@case (columnKey.Image) {
						<img [src]="element.image" class="table-image" [alt]="element.titleJpn"/>
					}
					@case (columnKey.AiredStart) {
						{{element.aired.start | date:"dd.MM.yyyy" | empty}}
					}
					@case (columnKey.TitleEng) {
						{{element.titleEng | empty}}
					}
					@default {
						{{element[column.key]}}
					}
				}
			</td>
		</ng-container>
	}
	<tr mat-header-row *matHeaderRowDef="headerRowDefinitions"></tr>
	<tr mat-row *matRowDef="let row; columns: headerRowDefinitions;"></tr>
</table>
