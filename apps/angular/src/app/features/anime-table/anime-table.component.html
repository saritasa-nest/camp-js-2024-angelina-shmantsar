<div class="controls">
	<mat-form-field appearance="outline">
		<mat-label class="mat-label">Type</mat-label>
		<mat-select (valueChange)="changeFilter($event)">
			<mat-option value="TV" class="mat-option">TV</mat-option>
			<mat-option value="OVA" class="mat-option">OVA</mat-option>
			<mat-option value="MOVIE" class="mat-option">Movie</mat-option>
			<mat-option value="SPECIAL" class="mat-option">Special</mat-option>
			<mat-option value="ONA" class="mat-option">ONA</mat-option>
			<mat-option value="MUSIC" class="mat-option">Music</mat-option>
			<mat-option value="PROMOTIONAL_VIDEOS" class="mat-option">Promotional videos</mat-option>
			<mat-option value="UNKNOWN" class="mat-option">Unknown</mat-option>
		</mat-select>
	</mat-form-field>
	<search-form (searchValue)="getSearchValue($event)"></search-form>
</div>
<table mat-table [dataSource]="dataSource" class="anime-table" matSort matSortDisableClear>
	@for (column of displayedColumns; track $index) {
		<ng-container [matColumnDef]="column.key">
			@if (sortableFields.includes(column.key)) {
				<th mat-header-cell *matHeaderCellDef mat-sort-header>{{column.header}}</th>
			} @else {
				<th mat-header-cell *matHeaderCellDef>{{column.header}}</th>
			}
			<td mat-cell *matCellDef="let element">
				@switch (column.key) {
					@case (columnKey.Image) {
						<img [src]="element.image" class="table-image" [alt]="element.titleJpn"/>
					}
					@case (columnKey.AiredStart) {
						{{element.aired.start | date:"dd.MM.yyyy" | empty}}
					}
					@case (columnKey.TitleEng) {
						{{element.titleEng | empty}}
					}
					@default {
						{{element[column.key]}}
					}
				}
			</td>
		</ng-container>
	}
	<tr mat-header-row *matHeaderRowDef="headerRowDefinitions"></tr>
	<tr mat-row *matRowDef="let row; columns: headerRowDefinitions;"></tr>
</table>
<mat-paginator
  #paginator
  [length]="totalCount"
  [pageSize]="pageSize"
  showFirstLastButtons
	class="paginator"
></mat-paginator>
