"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[245],{8245:(T,y,a)=>{a.r(y),a.d(y,{AuthComponent:()=>N});var t=a(7788),m=a(6610),n=a(7222);let v=(()=>{class r{hasError(i){const{form:o,fieldName:e,validatorName:f}=i,p=o.get(e);return!(!p?.invalid||!p.touched&&!p.dirty||!p.errors?.[f])}passwordIdentityValidator(i){const o=i.get("password"),e=i.get("retypedPassword");return o&&e&&o.value===e.value?null:{passwordMismatch:!0}}static#t=this.\u0275fac=function(o){return new(o||r)};static#r=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var d=a(9083),l=function(r){return r.Register="Register",r.Login="Login",r}(l||{});let b=(()=>{class r{constructor(){this.currentForm=(0,t.vPA)(l.Login),this.hasLoginError=d.qY,this.hasPasswordError=d.kT}onFormChange(){this.currentForm()===l.Login?this.currentForm.set(l.Register):this.currentForm.set(l.Login),this.hasLoginError.set(!1),this.hasPasswordError.set(!1)}onValueChange(i){("password"===i||"retypedPassword"===i)&&this.hasPasswordError.set(!1),this.hasLoginError.set(!1)}static#t=this.\u0275fac=function(o){return new(o||r)};static#r=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var s=a(2073),c=a(4587),g=a(2221),C=a(2106),u=a(7212),F=a(5981),w=a(4526),E=a(8823),k=a(2489);function P(r,h){if(1&r&&(t.j41(0,"mat-error",0),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&r){const i=t.XpG();t.R7$(),t.JRh(t.bMT(2,1,i.errorMessage$))}}let M=(()=>{class r{constructor(){this.control=new n.MJ("",{nonNullable:!0}),this.errorMessage$=new F.t(""),this.destroyRef=(0,t.WQX)(t.abz)}ngOnInit(){(0,k.h)(this.control.events).pipe((0,u.pQ)(this.destroyRef)).subscribe(()=>this.updateErrorMessage())}updateErrorMessage(){this.control.hasError("required")?this.errorMessage$.next("This field is required"):this.control.hasError("email")?this.errorMessage$.next("This field should be valid email"):this.control.hasError("minlength")?this.errorMessage$.next("The password must be at least 8 characters long"):this.errorMessage$.next("")}static#t=this.\u0275fac=function(o){return new(o||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-error"]],inputs:{control:"control"},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"error"]],template:function(o,e){1&o&&(t.DNE(0,P,3,3,"mat-error",0),t.nI1(1,"async")),2&o&&t.vxM(""!==t.bMT(1,1,e.errorMessage$)?0:-1)},dependencies:[m.MD,m.Jj,c.fS,s.TL],styles:["[_nghost-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}"],changeDetection:0})}return r})();function z(r,h){1&r&&(t.j41(0,"mat-error",2),t.EFF(1,"No active account found with given credentials"),t.k0s())}let R=(()=>{class r{constructor(){this.authService=(0,t.WQX)(C.u),this.destroyReference=(0,t.WQX)(t.abz),this.validationService=(0,t.WQX)(v),this.authFormService=(0,t.WQX)(b),this.formBuilder=(0,t.WQX)(n.ok),this.hasLoginError$=new F.t(!1),this.loginForm=this.formBuilder.nonNullable.group({email:["",[n.k0.required,n.k0.email]],password:["",n.k0.required]})}onSubmit(){if(this.loginForm.valid){const i=this.loginForm.getRawValue();this.authService.login(i).pipe((0,u.pQ)(this.destroyReference),(0,w.W)(o=>(o.status===d.Oh.Forbidden&&this.hasLoginError$.next(!0),(0,E.$)(o)))).subscribe()}}ngOnInit(){this.loginForm.valueChanges.pipe((0,u.pQ)(this.destroyReference)).subscribe(()=>{this.hasLoginError$.next(!1)})}static#t=this.\u0275fac=function(o){return new(o||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-login-form"]],standalone:!0,features:[t.aNF],decls:19,vars:6,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[1,"error"],[3,"control"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","er123456","type","password","formControlName","password"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(o,e){1&o&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.j41(1,"h2",1),t.EFF(2,"Login"),t.k0s(),t.DNE(3,z,2,0,"mat-error",2),t.nI1(4,"async"),t.nrm(5,"camp-error",3),t.j41(6,"mat-form-field",4)(7,"mat-label",5),t.EFF(8,"Email"),t.k0s(),t.nrm(9,"input",6),t.k0s(),t.nrm(10,"camp-error",3),t.j41(11,"mat-form-field",4)(12,"mat-label",5),t.EFF(13,"Password"),t.k0s(),t.nrm(14,"input",7),t.k0s(),t.j41(15,"button",8),t.EFF(16,"Login"),t.k0s(),t.j41(17,"button",9),t.bIt("click",function(){return e.authFormService.onFormChange()}),t.EFF(18," Not registered yet? Register "),t.k0s()()),2&o&&(t.Y8G("formGroup",e.loginForm),t.R7$(3),t.vxM(t.bMT(4,4,e.hasLoginError$)?3:-1),t.R7$(2),t.Y8G("control",e.loginForm.controls.email),t.R7$(5),t.Y8G("control",e.loginForm.controls.password))},dependencies:[m.MD,m.Jj,s.RG,s.rl,s.nJ,s.TL,c.fS,c.fg,g.Hl,g.$z,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,M],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return r})();function O(r,h){1&r&&(t.j41(0,"mat-error",2),t.EFF(1,"Passwords must match"),t.k0s())}function j(r,h){1&r&&(t.j41(0,"mat-error",2),t.EFF(1,"Check password. It must contain numeric and alphabetic symbols"),t.k0s())}let $=(()=>{class r{constructor(){this.validationService=(0,t.WQX)(v),this.authService=(0,t.WQX)(C.u),this.destroyReference=(0,t.WQX)(t.abz),this.formBuilder=(0,t.WQX)(n.ok),this.authFormService=(0,t.WQX)(b),this.registrationForm=this.formBuilder.nonNullable.group({email:["",[n.k0.required,n.k0.email]],firstName:["",n.k0.required],lastName:["",n.k0.required],password:["",[n.k0.required,n.k0.minLength(8)]],retypedPassword:["",n.k0.required]},{validators:this.validationService.passwordIdentityValidator}),this.hasPasswordError$=new F.t(!1)}onSubmit(){if(this.registrationForm.valid){const i=this.registrationForm.getRawValue();this.authService.register(i).pipe((0,u.pQ)(this.destroyReference),(0,w.W)(o=>(o.status===d.Oh.BadRequest&&this.hasPasswordError$.next(!0),(0,E.$)(o)))).subscribe()}}ngOnInit(){this.registrationForm.valueChanges.pipe((0,u.pQ)(this.destroyReference)).subscribe(()=>{this.hasPasswordError$.next(!1)})}static#t=this.\u0275fac=function(o){return new(o||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-registration-form"]],standalone:!0,features:[t.aNF],decls:35,vars:10,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[1,"error"],[3,"control"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","Alex","type","text","formControlName","firstName"],["matInput","","placeholder","Brown","type","text","formControlName","lastName"],["matInput","","placeholder","er123456","type","password","formControlName","password"],["matInput","","placeholder","er123456","type","password","formControlName","retypedPassword"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(o,e){1&o&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.j41(1,"h2",1),t.EFF(2,"Register"),t.k0s(),t.DNE(3,O,2,0,"mat-error",2)(4,j,2,0,"mat-error",2),t.nI1(5,"async"),t.nrm(6,"camp-error",3),t.j41(7,"mat-form-field",4)(8,"mat-label",5),t.EFF(9,"Email"),t.k0s(),t.nrm(10,"input",6),t.k0s(),t.nrm(11,"camp-error",3),t.j41(12,"mat-form-field",4)(13,"mat-label",5),t.EFF(14,"First name"),t.k0s(),t.nrm(15,"input",7),t.k0s(),t.nrm(16,"camp-error",3),t.j41(17,"mat-form-field",4)(18,"mat-label",5),t.EFF(19,"Last name"),t.k0s(),t.nrm(20,"input",8),t.k0s(),t.nrm(21,"camp-error",3),t.j41(22,"mat-form-field",4)(23,"mat-label",5),t.EFF(24,"Password"),t.k0s(),t.nrm(25,"input",9),t.k0s(),t.nrm(26,"camp-error",3),t.j41(27,"mat-form-field",4)(28,"mat-label",5),t.EFF(29,"Retyped password"),t.k0s(),t.nrm(30,"input",10),t.k0s(),t.j41(31,"button",11),t.EFF(32,"Register"),t.k0s(),t.j41(33,"button",12),t.bIt("click",function(){return e.authFormService.onFormChange()}),t.EFF(34," Already registered? Login "),t.k0s()()),2&o&&(t.Y8G("formGroup",e.registrationForm),t.R7$(3),t.vxM(null!=e.registrationForm.errors&&e.registrationForm.errors.passwordMismatch&&(e.registrationForm.touched||e.registrationForm.dirty)?3:-1),t.R7$(),t.vxM(t.bMT(5,8,e.hasPasswordError$)?4:-1),t.R7$(2),t.Y8G("control",e.registrationForm.controls.email),t.R7$(5),t.Y8G("control",e.registrationForm.controls.firstName),t.R7$(5),t.Y8G("control",e.registrationForm.controls.lastName),t.R7$(5),t.Y8G("control",e.registrationForm.controls.password),t.R7$(5),t.Y8G("control",e.registrationForm.controls.retypedPassword))},dependencies:[m.MD,m.Jj,s.RG,s.rl,s.nJ,s.TL,c.fS,c.fg,g.Hl,g.$z,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,M],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return r})();function x(r,h){1&r&&t.nrm(0,"camp-login-form")}function S(r,h){1&r&&t.nrm(0,"camp-registration-form")}let N=(()=>{class r{constructor(){this.validationService=(0,t.WQX)(v),this.authFormService=(0,t.WQX)(b),this.currentFormEnum=l,this.currentForm=this.authFormService.currentForm}static#t=this.\u0275fac=function(o){return new(o||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-auth"]],standalone:!0,features:[t.aNF],decls:2,vars:1,template:function(o,e){1&o&&t.DNE(0,x,1,0,"camp-login-form")(1,S,1,0,"camp-registration-form"),2&o&&t.vxM(e.currentForm()===e.currentFormEnum.Login?0:1)},dependencies:[m.MD,n.X1,R,$],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return r})()}}]);