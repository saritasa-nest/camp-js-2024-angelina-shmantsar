"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[126],{4126:(N,b,a)=>{a.r(b),a.d(b,{AuthComponent:()=>S});var t=a(7788),m=a(6610),o=a(7222);let p=(()=>{class r{passwordIdentityValidator(n){const e=n.get("password"),i=n.get("retypedPassword");return e&&i&&e.value===i.value?null:{passwordMismatch:!0}}static#t=this.\u0275fac=function(e){return new(e||r)};static#r=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var u=function(r){return r.Register="Register",r.Login="Login",r}(u||{}),c=a(5981);const v=new c.t(u.Login);var s=a(2073),d=a(4587),h=a(2221),y=a(6914),g=a(7212),F=a(7236),C=a(4526),w=a(8823),M=a(6949),E=a(840);function P(r,f){if(1&r&&(t.j41(0,"mat-error",0),t.EFF(1),t.k0s()),2&r){const n=t.XpG();t.R7$(),t.JRh(n.errorMessage)}}let k=(()=>{class r{constructor(){this.errorMessage="",this.errorMessage$=new c.t("")}static#t=this.\u0275fac=function(e){return new(e||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-error"]],inputs:{errorMessage:"errorMessage"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[1,"error"]],template:function(e,i){1&e&&t.DNE(0,P,2,1,"mat-error",0),2&e&&t.vxM(""!==i.errorMessage?0:-1)},dependencies:[m.MD,d.fS,s.TL],styles:["[_nghost-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}"],changeDetection:0})}return r})();function x(r,f){if(1&r&&t.nrm(0,"camp-error",2),2&r){const n=t.XpG();t.Y8G("errorMessage",n.errorMessages.loginError)}}let z=(()=>{class r{constructor(){this.authService=(0,t.WQX)(y.u),this.navigationService=(0,t.WQX)(E.o),this.destroyRef=(0,t.WQX)(t.abz),this.validationService=(0,t.WQX)(p),this.formBuilder=(0,t.WQX)(o.ok),this.currentAuthForm$=v,this.hasLoginError$=new c.t(!1),this.loginForm=this.formBuilder.nonNullable.group({email:["",[o.k0.required,o.k0.email]],password:["",o.k0.required]}),this.errorMessages={loginError:"No active account found with given credentials",email$:new c.t(""),password$:new c.t("")}}get email(){return this.loginForm.controls.email}get password(){return this.loginForm.controls.password}onSubmit(){if(this.loginForm.valid){const n=this.loginForm.getRawValue();this.authService.login(n).pipe((0,F.M)(()=>this.navigationService.navigate("")),(0,g.pQ)(this.destroyRef),(0,C.W)(e=>(e.status===M.O.Forbidden&&this.hasLoginError$.next(!0),(0,w.$)(e)))).subscribe()}}onFormChange(){this.currentAuthForm$.next(u.Register)}updateEmailError(){const n=this.loginForm.controls.email;n.hasError("required")?this.errorMessages.email$.next("This field is required"):n.hasError("email")?this.errorMessages.email$.next("This field should be valid email"):this.errorMessages.email$.next("")}updatePasswordError(){const n=this.loginForm.controls.password;n.hasError("required")?this.errorMessages.password$.next("This field is required"):n.hasError("email")?this.errorMessages.password$.next("The password must be at least 8 characters long"):this.errorMessages.password$.next("")}ngOnInit(){this.loginForm.valueChanges.pipe((0,g.pQ)(this.destroyRef)).subscribe(()=>{this.hasLoginError$.next(!1),this.updateEmailError(),this.updatePasswordError()})}static#t=this.\u0275fac=function(e){return new(e||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-login-form"]],standalone:!0,features:[t.aNF],decls:20,vars:7,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[3,"errorMessage"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","er123456","type","password","formControlName","password"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(e,i){if(1&e&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(1,"h2",1),t.EFF(2,"Login"),t.k0s(),t.DNE(3,x,1,1,"camp-error",2),t.nI1(4,"async"),t.nrm(5,"camp-error",2),t.nI1(6,"async"),t.j41(7,"mat-form-field",3)(8,"mat-label",4),t.EFF(9,"Email"),t.k0s(),t.nrm(10,"input",5),t.k0s(),t.nrm(11,"camp-error"),t.j41(12,"mat-form-field",3)(13,"mat-label",4),t.EFF(14,"Password"),t.k0s(),t.nrm(15,"input",6),t.k0s(),t.j41(16,"button",7),t.EFF(17,"Login"),t.k0s(),t.j41(18,"button",8),t.bIt("click",function(){return i.onFormChange()}),t.EFF(19," Not registered yet? Register "),t.k0s()()),2&e){let l;t.Y8G("formGroup",i.loginForm),t.R7$(3),t.vxM(t.bMT(4,3,i.hasLoginError$)?3:-1),t.R7$(2),t.Y8G("errorMessage",null!==(l=t.bMT(6,5,i.errorMessages.email$))&&void 0!==l?l:"")}},dependencies:[m.MD,m.Jj,s.RG,s.rl,s.nJ,d.fS,d.fg,h.Hl,h.$z,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,k],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return r})();function O(r,f){1&r&&(t.j41(0,"mat-error",2),t.EFF(1,"Passwords must match"),t.k0s())}function $(r,f){1&r&&(t.j41(0,"mat-error",2),t.EFF(1,"Check password. It must contain numeric and alphabetic symbols"),t.k0s())}let R=(()=>{class r{constructor(){this.validationService=(0,t.WQX)(p),this.authService=(0,t.WQX)(y.u),this.navigationService=(0,t.WQX)(E.o),this.destroyRef=(0,t.WQX)(t.abz),this.formBuilder=(0,t.WQX)(o.ok),this.currentAuthForm$=v,this.registrationForm=this.formBuilder.nonNullable.group({email:["",[o.k0.required,o.k0.email]],firstName:["",o.k0.required],lastName:["",o.k0.required],password:["",[o.k0.required,o.k0.minLength(8)]],retypedPassword:["",o.k0.required]},{validators:this.validationService.passwordIdentityValidator}),this.hasPasswordError$=new c.t(!1)}onFormChange(){this.currentAuthForm$.next(u.Login)}onSubmit(){if(this.registrationForm.valid){const n=this.registrationForm.getRawValue();this.authService.register(n).pipe((0,F.M)(()=>this.navigationService.navigate("")),(0,g.pQ)(this.destroyRef),(0,C.W)(e=>(e.status===M.O.BadRequest&&this.hasPasswordError$.next(!0),(0,w.$)(e)))).subscribe()}}ngOnInit(){this.registrationForm.valueChanges.pipe((0,g.pQ)(this.destroyRef)).subscribe(()=>{this.hasPasswordError$.next(!1)})}static#t=this.\u0275fac=function(e){return new(e||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-registration-form"]],standalone:!0,features:[t.aNF],decls:35,vars:5,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[1,"error"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","Alex","type","text","formControlName","firstName"],["matInput","","placeholder","Brown","type","text","formControlName","lastName"],["matInput","","placeholder","er123456","type","password","formControlName","password"],["matInput","","placeholder","er123456","type","password","formControlName","retypedPassword"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(e,i){1&e&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(1,"h2",1),t.EFF(2,"Register"),t.k0s(),t.DNE(3,O,2,0,"mat-error",2)(4,$,2,0,"mat-error",2),t.nI1(5,"async"),t.nrm(6,"camp-error"),t.j41(7,"mat-form-field",3)(8,"mat-label",4),t.EFF(9,"Email"),t.k0s(),t.nrm(10,"input",5),t.k0s(),t.nrm(11,"camp-error"),t.j41(12,"mat-form-field",3)(13,"mat-label",4),t.EFF(14,"First name"),t.k0s(),t.nrm(15,"input",6),t.k0s(),t.nrm(16,"camp-error"),t.j41(17,"mat-form-field",3)(18,"mat-label",4),t.EFF(19,"Last name"),t.k0s(),t.nrm(20,"input",7),t.k0s(),t.nrm(21,"camp-error"),t.j41(22,"mat-form-field",3)(23,"mat-label",4),t.EFF(24,"Password"),t.k0s(),t.nrm(25,"input",8),t.k0s(),t.nrm(26,"camp-error"),t.j41(27,"mat-form-field",3)(28,"mat-label",4),t.EFF(29,"Retyped password"),t.k0s(),t.nrm(30,"input",9),t.k0s(),t.j41(31,"button",10),t.EFF(32,"Register"),t.k0s(),t.j41(33,"button",11),t.bIt("click",function(){return i.onFormChange()}),t.EFF(34," Already registered? Login "),t.k0s()()),2&e&&(t.Y8G("formGroup",i.registrationForm),t.R7$(3),t.vxM(null!=i.registrationForm.errors&&i.registrationForm.errors.passwordMismatch&&(i.registrationForm.touched||i.registrationForm.dirty)?3:-1),t.R7$(),t.vxM(t.bMT(5,3,i.hasPasswordError$)?4:-1))},dependencies:[m.MD,m.Jj,s.RG,s.rl,s.nJ,s.TL,d.fS,d.fg,h.Hl,h.$z,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,k],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return r})();function j(r,f){1&r&&t.nrm(0,"camp-login-form")}function T(r,f){1&r&&t.nrm(0,"camp-registration-form")}let S=(()=>{class r{constructor(){this.validationService=(0,t.WQX)(p),this.currentFormEnum=u,this.currentAuthForm$=v}static#t=this.\u0275fac=function(e){return new(e||r)};static#r=this.\u0275cmp=t.VBU({type:r,selectors:[["camp-auth"]],standalone:!0,features:[t.aNF],decls:3,vars:3,template:function(e,i){1&e&&(t.DNE(0,j,1,0,"camp-login-form"),t.nI1(1,"async"),t.DNE(2,T,1,0,"camp-registration-form")),2&e&&t.vxM(t.bMT(1,1,i.currentAuthForm$)===i.currentFormEnum.Login?0:2)},dependencies:[m.MD,m.Jj,o.X1,z,R],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return r})()}}]);