"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[126],{4126:(q,b,a)=>{a.r(b),a.d(b,{AuthComponent:()=>Y});var r=a(7788),m=a(6610),i=a(7222);let p=(()=>{class t{hasError(e,n){return e.hasError(n)&&(e.touched||e.dirty)}passwordIdentityValidator(e){const n=e.get("password"),o=e.get("retypedPassword");return n&&o&&n.value===o.value?null:{passwordMismatch:!0}}static#r=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275prov=r.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var c=function(t){return t.Register="Register",t.Login="Login",t}(c||{}),u=a(5981);const g=new u.t(c.Login);var l=a(2073),d=a(4587),f=a(2221),M=a(6914),h=a(7212),C=a(7236),y=a(4526),F=a(8823),w=a(6949),E=a(840);function R(t,s){if(1&t&&(r.j41(0,"mat-error",0),r.EFF(1),r.nI1(2,"async"),r.k0s()),2&t){const e=r.XpG();r.R7$(),r.JRh(r.bMT(2,1,e.errorMessage$))}}let _=(()=>{class t{constructor(){this.errorMessage="",this.errorMessage$=new u.t("")}ngOnChanges(e){this.errorMessage$.next(e.errorMessage.currentValue)}static#r=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=r.VBU({type:t,selectors:[["camp-error"]],inputs:{errorMessage:"errorMessage"},standalone:!0,features:[r.OA$,r.aNF],decls:1,vars:1,consts:[[1,"error"]],template:function(n,o){1&n&&r.DNE(0,R,3,3,"mat-error",0),2&n&&r.vxM(""!==o.errorMessage?0:-1)},dependencies:[m.MD,m.Jj,d.fS,l.TL],styles:["[_nghost-%COMP%]{display:block;width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}"],changeDetection:0})}return t})();function x(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.loginError)}}function k(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}function P(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.email)}}function T(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}let z=(()=>{class t{constructor(){this.authService=(0,r.WQX)(M.u),this.navigationService=(0,r.WQX)(E.o),this.destroyRef=(0,r.WQX)(r.abz),this.validationService=(0,r.WQX)(p),this.formBuilder=(0,r.WQX)(i.ok),this.currentAuthForm$=g,this.hasLoginError$=new u.t(!1),this.loginForm=this.formBuilder.nonNullable.group({email:["",[i.k0.required,i.k0.email]],password:["",i.k0.required]}),this.errorMessages={loginError:"No active account found with given credentials",required:"This field is required",email:"This field should be valid email"}}get controls(){return this.loginForm.controls}onSubmit(){if(this.loginForm.valid){const e=this.loginForm.getRawValue();this.authService.login(e).pipe((0,C.M)(()=>this.navigationService.navigate("")),(0,h.pQ)(this.destroyRef),(0,y.W)(n=>(n.status===w.O.Forbidden&&this.hasLoginError$.next(!0),(0,F.$)(n)))).subscribe()}}onFormChange(){this.currentAuthForm$.next(c.Register)}ngOnInit(){this.loginForm.valueChanges.pipe((0,h.pQ)(this.destroyRef)).subscribe(()=>{this.hasLoginError$.next(!1)})}static#r=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=r.VBU({type:t,selectors:[["camp-login-form"]],standalone:!0,features:[r.aNF],decls:20,vars:7,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[3,"errorMessage"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","er123456","type","password","formControlName","password"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(n,o){1&n&&(r.j41(0,"form",0),r.bIt("ngSubmit",function(){return o.onSubmit()}),r.j41(1,"h2",1),r.EFF(2,"Login"),r.k0s(),r.DNE(3,x,1,1,"camp-error",2),r.nI1(4,"async"),r.DNE(5,k,1,1,"camp-error",2)(6,P,1,1,"camp-error",2),r.j41(7,"mat-form-field",3)(8,"mat-label",4),r.EFF(9,"Email"),r.k0s(),r.nrm(10,"input",5),r.k0s(),r.DNE(11,T,1,1,"camp-error",2),r.j41(12,"mat-form-field",3)(13,"mat-label",4),r.EFF(14,"Password"),r.k0s(),r.nrm(15,"input",6),r.k0s(),r.j41(16,"button",7),r.EFF(17," Login "),r.k0s(),r.j41(18,"button",8),r.bIt("click",function(){return o.onFormChange()}),r.EFF(19," Not registered yet? Register "),r.k0s()()),2&n&&(r.Y8G("formGroup",o.loginForm),r.R7$(3),r.vxM(r.bMT(4,5,o.hasLoginError$)?3:-1),r.R7$(2),r.vxM(o.validationService.hasError(o.controls.email,"required")?5:-1),r.R7$(),r.vxM(o.validationService.hasError(o.controls.email,"email")?6:-1),r.R7$(5),r.vxM(o.validationService.hasError(o.controls.password,"required")?11:-1))},dependencies:[m.MD,m.Jj,l.RG,l.rl,l.nJ,d.fS,d.fg,f.Hl,f.$z,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,_],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return t})();function $(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.mismatch)}}function O(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.weakPassword)}}function S(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}function G(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.email)}}function N(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}function j(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}function X(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}function L(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.minLength)}}function D(t,s){if(1&t&&r.nrm(0,"camp-error",2),2&t){const e=r.XpG();r.Y8G("errorMessage",e.errorMessages.required)}}let I=(()=>{class t{constructor(){this.validationService=(0,r.WQX)(p),this.authService=(0,r.WQX)(M.u),this.navigationService=(0,r.WQX)(E.o),this.destroyRef=(0,r.WQX)(r.abz),this.formBuilder=(0,r.WQX)(i.ok),this.currentAuthForm$=g,this.registrationForm=this.formBuilder.nonNullable.group({email:["",[i.k0.required,i.k0.email]],firstName:["",i.k0.required],lastName:["",i.k0.required],password:["",[i.k0.required,i.k0.minLength(8)]],retypedPassword:["",i.k0.required]},{validators:this.validationService.passwordIdentityValidator}),this.hasPasswordError$=new u.t(!1),this.errorMessages={required:"This field is required",email:"This field should be valid email",minLength:"The password must be at least 8 characters long",mismatch:"The passwords must match",weakPassword:"Check password. It must contain numeric and alphabetic symbols"}}get controls(){return this.registrationForm.controls}onFormChange(){this.currentAuthForm$.next(c.Login)}onSubmit(){if(this.registrationForm.valid){const e=this.registrationForm.getRawValue();this.authService.register(e).pipe((0,C.M)(()=>this.navigationService.navigate("")),(0,h.pQ)(this.destroyRef),(0,y.W)(n=>(n.status===w.O.BadRequest&&this.hasPasswordError$.next(!0),(0,F.$)(n)))).subscribe()}}ngOnInit(){this.registrationForm.valueChanges.pipe((0,h.pQ)(this.destroyRef)).subscribe(()=>{this.hasPasswordError$.next(!1)})}static#r=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=r.VBU({type:t,selectors:[["camp-registration-form"]],standalone:!0,features:[r.aNF],decls:37,vars:12,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[3,"errorMessage"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","Alex","type","text","formControlName","firstName"],["matInput","","placeholder","Brown","type","text","formControlName","lastName"],["matInput","","placeholder","er123456","type","password","formControlName","password"],["matInput","","placeholder","er123456","type","password","formControlName","retypedPassword"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(n,o){1&n&&(r.j41(0,"form",0),r.bIt("ngSubmit",function(){return o.onSubmit()}),r.j41(1,"h2",1),r.EFF(2,"Register"),r.k0s(),r.DNE(3,$,1,1,"camp-error",2)(4,O,1,1,"camp-error",2),r.nI1(5,"async"),r.DNE(6,S,1,1,"camp-error",2)(7,G,1,1,"camp-error",2),r.j41(8,"mat-form-field",3)(9,"mat-label",4),r.EFF(10,"Email"),r.k0s(),r.nrm(11,"input",5),r.k0s(),r.DNE(12,N,1,1,"camp-error",2),r.j41(13,"mat-form-field",3)(14,"mat-label",4),r.EFF(15,"First name"),r.k0s(),r.nrm(16,"input",6),r.k0s(),r.DNE(17,j,1,1,"camp-error",2),r.j41(18,"mat-form-field",3)(19,"mat-label",4),r.EFF(20,"Last name"),r.k0s(),r.nrm(21,"input",7),r.k0s(),r.DNE(22,X,1,1,"camp-error",2)(23,L,1,1,"camp-error",2),r.j41(24,"mat-form-field",3)(25,"mat-label",4),r.EFF(26,"Password"),r.k0s(),r.nrm(27,"input",8),r.k0s(),r.DNE(28,D,1,1,"camp-error",2),r.j41(29,"mat-form-field",3)(30,"mat-label",4),r.EFF(31,"Retyped password"),r.k0s(),r.nrm(32,"input",9),r.k0s(),r.j41(33,"button",10),r.EFF(34," Register "),r.k0s(),r.j41(35,"button",11),r.bIt("click",function(){return o.onFormChange()}),r.EFF(36," Already registered? Login "),r.k0s()()),2&n&&(r.Y8G("formGroup",o.registrationForm),r.R7$(3),r.vxM(null!=o.registrationForm.errors&&o.registrationForm.errors.passwordMismatch&&(o.registrationForm.touched||o.registrationForm.dirty)?3:-1),r.R7$(),r.vxM(r.bMT(5,10,o.hasPasswordError$)?4:-1),r.R7$(2),r.vxM(o.validationService.hasError(o.controls.email,"required")?6:-1),r.R7$(),r.vxM(o.validationService.hasError(o.controls.email,"email")?7:-1),r.R7$(5),r.vxM(o.validationService.hasError(o.controls.firstName,"required")?12:-1),r.R7$(5),r.vxM(o.validationService.hasError(o.controls.lastName,"required")?17:-1),r.R7$(5),r.vxM(o.validationService.hasError(o.controls.password,"required")?22:-1),r.R7$(),r.vxM(o.validationService.hasError(o.controls.password,"minlength")?23:-1),r.R7$(5),r.vxM(o.validationService.hasError(o.controls.retypedPassword,"required")?28:-1))},dependencies:[m.MD,m.Jj,l.RG,l.rl,l.nJ,d.fS,d.fg,f.Hl,f.$z,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,_],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return t})();function A(t,s){1&t&&r.nrm(0,"camp-login-form")}function Q(t,s){1&t&&r.nrm(0,"camp-registration-form")}let Y=(()=>{class t{constructor(){this.validationService=(0,r.WQX)(p),this.currentFormEnum=c,this.currentAuthForm$=g}static#r=this.\u0275fac=function(n){return new(n||t)};static#t=this.\u0275cmp=r.VBU({type:t,selectors:[["camp-auth"]],standalone:!0,features:[r.aNF],decls:3,vars:3,template:function(n,o){1&n&&(r.DNE(0,A,1,0,"camp-login-form"),r.nI1(1,"async"),r.DNE(2,Q,1,0,"camp-registration-form")),2&n&&r.vxM(r.bMT(1,1,o.currentAuthForm$)===o.currentFormEnum.Login?0:2)},dependencies:[m.MD,m.Jj,i.X1,z,I],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return t})()}}]);