"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[757],{3757:(w,c,r)=>{r.r(c),r.d(c,{LoginPageComponent:()=>$});var l=r(6610),t=r(7788),s=r(2073),d=r(4587),m=r(2221),o=r(7222),p=r(6914),u=r(7212),b=r(4549),g=r(5981),y=r(7236),F=r(4526),C=r(8448),M=r(8823),h=r(6182),f=r(922),P=r(840),E=r(5192);let S=(()=>{class n{constructor(){this.authService=(0,t.WQX)(p.u),this.navigationService=(0,t.WQX)(P.o),this.destroyRef=(0,t.WQX)(t.abz),this.validationService=(0,t.WQX)(b.B),this.formBuilder=(0,t.WQX)(o.ok),this.activatedRoute=(0,t.WQX)(f.nX),this.router=(0,t.WQX)(f.Ix),this.hasLoginError$=new g.t(!1),this.isPasswordVisible$=new g.t(!1),this.loginForm=this.formBuilder.nonNullable.group({email:this.formBuilder.nonNullable.control("",[o.k0.required,o.k0.email]),password:this.formBuilder.nonNullable.control("",[o.k0.required])}),this.loginError="No active account found with given credentials",this.redirectUrl=this.activatedRoute.snapshot.queryParams.redirectUrl??""}ngOnInit(){this.loginForm.valueChanges.pipe((0,u.pQ)(this.destroyRef)).subscribe(()=>{this.hasLoginError$.next(!1)})}changePasswordVisibility(){this.isPasswordVisible$.next(!this.isPasswordVisible$.value)}onSubmit(){if(this.loginForm.valid){const a=this.loginForm.getRawValue();this.authService.login(a).pipe((0,y.M)(()=>this.navigationService.navigate(this.redirectUrl)),(0,u.pQ)(this.destroyRef),(0,F.W)(e=>this.validationService.isLoginError(e)?(this.hasLoginError$.next(!0),C.w):(0,M.$)(()=>e))).subscribe()}}onFormChange(){this.router.navigate(["register"],{queryParams:{redirectUrl:this.redirectUrl}})}get controls(){return this.loginForm.controls}static#t=this.\u0275fac=function(e){return new(e||n)};static#r=this.\u0275cmp=t.VBU({type:n,selectors:[["camp-login-form"]],standalone:!0,features:[t.aNF],decls:25,vars:13,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[3,"errorMessage"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","er123456","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"password-visibility"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(e,i){1&e&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return i.onSubmit()}),t.j41(1,"h2",1),t.EFF(2,"Login"),t.k0s(),t.nrm(3,"camp-error",2),t.nI1(4,"async"),t.nrm(5,"camp-error",2)(6,"camp-error",2),t.j41(7,"mat-form-field",3)(8,"mat-label",4),t.EFF(9,"Email"),t.k0s(),t.nrm(10,"input",5),t.k0s(),t.nrm(11,"camp-error",2),t.j41(12,"mat-form-field",3)(13,"mat-label",4),t.EFF(14,"Password"),t.k0s(),t.nrm(15,"input",6),t.nI1(16,"async"),t.j41(17,"button",7),t.bIt("click",function(){return i.changePasswordVisibility()}),t.j41(18,"mat-icon",8),t.EFF(19),t.nI1(20,"async"),t.k0s()()(),t.j41(21,"button",9),t.EFF(22," Login "),t.k0s(),t.j41(23,"button",10),t.bIt("click",function(){return i.onFormChange()}),t.EFF(24," Not registered yet? Register "),t.k0s()()),2&e&&(t.Y8G("formGroup",i.loginForm),t.R7$(3),t.Y8G("errorMessage",t.bMT(4,7,i.hasLoginError$)?i.loginError:""),t.R7$(2),t.Y8G("errorMessage",i.validationService.hasError(i.controls.email,"required")?i.validationService.getErrorMessage("required"):""),t.R7$(),t.Y8G("errorMessage",i.validationService.hasError(i.controls.email,"email")?i.validationService.getErrorMessage("email"):""),t.R7$(5),t.Y8G("errorMessage",i.validationService.hasError(i.controls.password,"required")?i.validationService.getErrorMessage("required"):""),t.R7$(4),t.Y8G("type",t.bMT(16,9,i.isPasswordVisible$)?"text":"password"),t.R7$(4),t.SpI(" ",t.bMT(20,11,i.isPasswordVisible$)?"visibility_off":"visibility"," "))},dependencies:[l.MD,l.Jj,s.RG,s.rl,s.nJ,s.yw,d.fS,d.fg,m.Hl,m.$z,m.iY,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,E.A,h.m_,h.An],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.password-visibility[_ngcontent-%COMP%]{color:var(--anime-primary-dark-color-disabled)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return n})(),$=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#r=this.\u0275cmp=t.VBU({type:n,selectors:[["camp-login-page"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(e,i){1&e&&t.nrm(0,"camp-login-form")},dependencies:[l.MD,S],encapsulation:2,changeDetection:0})}return n})()}}]);