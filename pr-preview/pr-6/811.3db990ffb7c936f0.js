"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[811],{4811:(S,h,e)=>{e.r(h),e.d(h,{RegistrationPageComponent:()=>C});var l=e(6610),r=e(7788),n=e(2073),u=e(4587),m=e(2221),i=e(7222),p=e(4549),b=e(6914),g=e(7212),f=e(6182),v=e(922),d=e(5981),y=e(7236),M=e(4526),w=e(8448),F=e(8823),P=e(840),E=e(5192);let R=(()=>{class a{constructor(){this.validationService=(0,r.WQX)(p.B),this.authService=(0,r.WQX)(b.u),this.navigationService=(0,r.WQX)(P.o),this.destroyRef=(0,r.WQX)(r.abz),this.formBuilder=(0,r.WQX)(i.ok),this.activatedRoute=(0,r.WQX)(v.nX),this.router=(0,r.WQX)(v.Ix),this.registrationForm=this.formBuilder.nonNullable.group({email:this.formBuilder.nonNullable.control("",[i.k0.required,i.k0.email]),firstName:this.formBuilder.nonNullable.control("",[i.k0.required]),lastName:this.formBuilder.nonNullable.control("",[i.k0.required]),password:this.formBuilder.nonNullable.control("",[i.k0.required,i.k0.minLength(8)]),retypedPassword:this.formBuilder.nonNullable.control("",[i.k0.required])},{validators:this.validationService.passwordIdentityValidator}),this.hasPasswordError$=new d.t(!1),this.isPasswordVisible$=new d.t(!1),this.hasPasswordMismatchError$=new d.t(!1),this.errorMessages={mismatch:"The passwords must match",weakPassword:"Check password. It must contain numeric and alphabetic symbols"},this.redirectUrl=this.activatedRoute.snapshot.queryParams.redirectUrl??""}ngOnInit(){this.registrationForm.valueChanges.pipe((0,g.pQ)(this.destroyRef)).subscribe(()=>{this.hasPasswordError$.next(!1),this.hasPasswordMismatchError$.next(this.registrationForm.errors?.passwordMismatch&&(this.registrationForm.touched||this.registrationForm.dirty))})}changePasswordVisibility(){this.isPasswordVisible$.next(!this.isPasswordVisible$.value)}onFormChange(){this.router.navigate(["login"],{queryParams:{redirectUrl:this.redirectUrl}})}onSubmit(){if(this.registrationForm.valid){const s=this.registrationForm.getRawValue();this.authService.register(s).pipe((0,y.M)(()=>this.navigationService.navigate(this.redirectUrl)),(0,g.pQ)(this.destroyRef),(0,M.W)(o=>this.validationService.isPasswordError(o)?(this.hasPasswordError$.next(!0),w.w):(0,F.$)(()=>o))).subscribe()}}get controls(){return this.registrationForm.controls}static#r=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=r.VBU({type:a,selectors:[["camp-registration-form"]],standalone:!0,features:[r.aNF],decls:48,vars:26,consts:[[1,"auth-form",3,"ngSubmit","formGroup"],[1,"title"],[3,"errorMessage"],["appearance","outline",1,"field"],[1,"field-title"],["matInput","","placeholder","example@example.com","type","email","formControlName","email"],["matInput","","placeholder","Alex","type","text","formControlName","firstName"],["matInput","","placeholder","Brown","type","text","formControlName","lastName"],["matInput","","placeholder","er123456","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"password-visibility"],["matInput","","placeholder","er123456","formControlName","retypedPassword",3,"type"],["mat-flat-button","","type","submit",1,"submit-button"],["mat-stroked-button","","type","button",1,"form-change-button",3,"click"]],template:function(o,t){1&o&&(r.j41(0,"form",0),r.bIt("ngSubmit",function(){return t.onSubmit()}),r.j41(1,"h2",1),r.EFF(2,"Register"),r.k0s(),r.nrm(3,"camp-error",2),r.nI1(4,"async"),r.nrm(5,"camp-error",2),r.nI1(6,"async"),r.nrm(7,"camp-error",2)(8,"camp-error",2),r.j41(9,"mat-form-field",3)(10,"mat-label",4),r.EFF(11,"Email"),r.k0s(),r.nrm(12,"input",5),r.k0s(),r.nrm(13,"camp-error",2),r.j41(14,"mat-form-field",3)(15,"mat-label",4),r.EFF(16,"First name"),r.k0s(),r.nrm(17,"input",6),r.k0s(),r.nrm(18,"camp-error",2),r.j41(19,"mat-form-field",3)(20,"mat-label",4),r.EFF(21,"Last name"),r.k0s(),r.nrm(22,"input",7),r.k0s(),r.nrm(23,"camp-error",2)(24,"camp-error",2),r.j41(25,"mat-form-field",3)(26,"mat-label",4),r.EFF(27,"Password"),r.k0s(),r.nrm(28,"input",8),r.nI1(29,"async"),r.j41(30,"button",9),r.bIt("click",function(){return t.changePasswordVisibility()}),r.j41(31,"mat-icon",10),r.EFF(32),r.nI1(33,"async"),r.k0s()()(),r.nrm(34,"camp-error",2),r.j41(35,"mat-form-field",3)(36,"mat-label",4),r.EFF(37,"Retyped password"),r.k0s(),r.nrm(38,"input",11),r.nI1(39,"async"),r.j41(40,"button",9),r.bIt("click",function(){return t.changePasswordVisibility()}),r.j41(41,"mat-icon",10),r.EFF(42),r.nI1(43,"async"),r.k0s()()(),r.j41(44,"button",12),r.EFF(45," Register "),r.k0s(),r.j41(46,"button",13),r.bIt("click",function(){return t.onFormChange()}),r.EFF(47," Already registered? Login "),r.k0s()()),2&o&&(r.Y8G("formGroup",t.registrationForm),r.R7$(3),r.Y8G("errorMessage",r.bMT(4,14,t.hasPasswordMismatchError$)?t.errorMessages.mismatch:""),r.R7$(2),r.Y8G("errorMessage",r.bMT(6,16,t.hasPasswordError$)?t.errorMessages.weakPassword:""),r.R7$(2),r.Y8G("errorMessage",t.validationService.hasError(t.controls.email,"required")?t.validationService.getErrorMessage("required"):""),r.R7$(),r.Y8G("errorMessage",t.validationService.hasError(t.controls.email,"email")?t.validationService.getErrorMessage("email"):""),r.R7$(5),r.Y8G("errorMessage",t.validationService.hasError(t.controls.firstName,"required")?t.validationService.getErrorMessage("required"):""),r.R7$(5),r.Y8G("errorMessage",t.validationService.hasError(t.controls.lastName,"required")?t.validationService.getErrorMessage("required"):""),r.R7$(5),r.Y8G("errorMessage",t.validationService.hasError(t.controls.password,"required")?t.validationService.getErrorMessage("required"):""),r.R7$(),r.Y8G("errorMessage",t.validationService.hasError(t.controls.password,"minlength")?t.validationService.getErrorMessage("minlength"):""),r.R7$(4),r.Y8G("type",r.bMT(29,18,t.isPasswordVisible$)?"text":"password"),r.R7$(4),r.SpI(" ",r.bMT(33,20,t.isPasswordVisible$)?"visibility_off":"visibility"," "),r.R7$(2),r.Y8G("errorMessage",t.validationService.hasError(t.controls.retypedPassword,"required")?t.validationService.getErrorMessage("required"):""),r.R7$(4),r.Y8G("type",r.bMT(39,22,t.isPasswordVisible$)?"text":"password"),r.R7$(4),r.SpI(" ",r.bMT(43,24,t.isPasswordVisible$)?"visibility_off":"visibility"," "))},dependencies:[l.MD,l.Jj,n.RG,n.rl,n.nJ,n.yw,u.fS,u.fg,m.Hl,m.$z,m.iY,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,E.A,f.m_,f.An],styles:["[_nghost-%COMP%]{--auth-form-width: 480px;--auth-buttons-width: 80%;display:flex;justify-content:center}.auth-form[_ngcontent-%COMP%]{width:var(--auth-form-width);height:-moz-fit-content;height:fit-content;padding:var(--size-8) var(--size-10);background-color:var(--anime-accent-light-color);display:flex;flex-direction:column;align-items:center;position:fixed;top:15%;border-radius:var(--size-3)}.title[_ngcontent-%COMP%]{font-size:var(--font-size-lg);color:var(--anime-primary-dark-color);margin-bottom:var(--size-5)}.field[_ngcontent-%COMP%]{width:100%}.error[_ngcontent-%COMP%]{color:var(--error-color);width:100%;text-align:left;margin-bottom:var(--size-3)}.password-visibility[_ngcontent-%COMP%]{color:var(--anime-primary-dark-color-disabled)}.submit-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);margin-bottom:var(--size-5);font-family:var(--main-anime-font-family)}.form-change-button[_ngcontent-%COMP%]{width:var(--auth-buttons-width);border-radius:var(--size-2);background-color:var(--anime-primary-light-color);font-family:var(--main-anime-font-family)}.field-title[_ngcontent-%COMP%]{font-family:var(--main-anime-font-family)}[_ngcontent-%COMP%]::placeholder{font-family:var(--main-anime-font-family)}"],changeDetection:0})}return a})(),C=(()=>{class a{static#r=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275cmp=r.VBU({type:a,selectors:[["camp-registration-page"]],standalone:!0,features:[r.aNF],decls:1,vars:0,template:function(o,t){1&o&&r.nrm(0,"camp-registration-form")},dependencies:[l.MD,R],encapsulation:2,changeDetection:0})}return a})()}}]);